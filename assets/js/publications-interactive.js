document.addEventListener("DOMContentLoaded",function(){function e(e){if(e.classList.toggle("expanded"),e.classList.contains("expanded")){const t=e.querySelector(".abstract");t&&!t.classList.contains("open")&&t.classList.add("open")}}function t(e){const t=e.querySelector(".abstract");t&&t.classList.toggle("open")}const n=document.querySelectorAll(".publications ol.bibliography li");n.forEach(n=>{const c=n.querySelector(".title"),o=n.querySelector(".preview");n.querySelector(".abstract");if(o){const t=document.createElement("img");t.src=o.src,t.alt=o.alt,t.className="preview-expanded";const c=n.querySelector(".publication-content");c?c.parentNode.insertBefore(t,c.nextSibling):n.appendChild(t),o.addEventListener("click",function(t){t.preventDefault(),e(n)}),t.addEventListener("click",function(t){t.preventDefault(),e(n)})}c&&c.addEventListener("click",function(e){e.preventDefault(),t(n)})}),document.addEventListener("click",function(e){e.target.closest(".publications ol.bibliography li")||n.forEach(t=>{t.classList.contains("expanded")&&!t.contains(e.target)&&t.classList.remove("expanded")})});document.querySelectorAll(".publications .details-button").forEach(e=>{e.addEventListener("click",function(){const e=this.closest("li"),t=this.textContent.toLowerCase().trim(),n=e.querySelector(`.${t}`);n&&n.classList.toggle("open")})})});